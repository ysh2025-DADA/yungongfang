<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHubåŒæ­¥æµ‹è¯•é¡µé¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-4xl mx-auto p-8">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">ğŸ”§ GitHubåŒæ­¥åŠŸèƒ½æµ‹è¯•</h1>
            <p class="text-gray-600">æµ‹è¯•GitHubè‡ªåŠ¨åŒæ­¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
        </div>

        <!-- æ–‡ä»¶æ£€æŸ¥ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸ“ æ–‡ä»¶æ£€æŸ¥</h2>
            <div id="file-check" class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <span class="font-medium">GitHubåŒæ­¥è„šæœ¬</span>
                    <span id="github-sync-status" class="text-gray-500">æ£€æŸ¥ä¸­...</span>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <span class="font-medium">GitHubåŒæ­¥ç®¡ç†é¡µé¢</span>
                    <span id="github-manager-status" class="text-gray-500">æ£€æŸ¥ä¸­...</span>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <span class="font-medium">å¯¼èˆªé¡µé¢</span>
                    <span id="navigation-status" class="text-gray-500">æ£€æŸ¥ä¸­...</span>
                </div>
            </div>
        </div>

        <!-- å¿«é€Ÿè®¿é—® -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸš€ å¿«é€Ÿè®¿é—®</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button onclick="testGitHubSync()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    æµ‹è¯•GitHubåŒæ­¥
                </button>
                <button onclick="window.location.href='github-sync-manager.html'" class="bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    æ‰“å¼€GitHubåŒæ­¥ç®¡ç†
                </button>
                <button onclick="window.location.href='navigation.html'" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    æ‰“å¼€å¯¼èˆªä¸­å¿ƒ
                </button>
            </div>
        </div>

        <!-- æµ‹è¯•ç»“æœ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸ“Š æµ‹è¯•ç»“æœ</h2>
            <div id="test-results" class="space-y-4">
                <div class="text-gray-500">ç‚¹å‡»"æµ‹è¯•GitHubåŒæ­¥"æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
            </div>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸ“‹ ä½¿ç”¨è¯´æ˜</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-medium text-gray-900 mb-2">å¦‚æœæ‰¾ä¸åˆ°GitHubè‡ªåŠ¨åŒæ­¥é¡µé¢ï¼š</h3>
                    <ol class="text-sm text-gray-600 space-y-1 list-decimal list-inside">
                        <li>ç¡®ä¿æ‚¨æ˜¯é€šè¿‡WebæœåŠ¡å™¨è®¿é—®ç½‘ç«™ï¼ˆä¸æ˜¯ç›´æ¥æ‰“å¼€HTMLæ–‡ä»¶ï¼‰</li>
                        <li>ä½¿ç”¨Pythonå¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼š<code class="bg-gray-100 px-2 py-1 rounded">python -m http.server 8000</code></li>
                        <li>åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š<code class="bg-gray-100 px-2 py-1 rounded">http://localhost:8000</code></li>
                        <li>ç‚¹å‡»"å¯¼èˆªä¸­å¿ƒ" â†’ "GitHubè‡ªåŠ¨åŒæ­¥"</li>
                    </ol>
                </div>
                <div>
                    <h3 class="font-medium text-gray-900 mb-2">ç›´æ¥è®¿é—®é“¾æ¥ï¼š</h3>
                    <div class="space-y-2">
                        <a href="github-sync-manager.html" class="block text-blue-600 hover:underline">ğŸ”— GitHubè‡ªåŠ¨åŒæ­¥ç®¡ç†é¡µé¢</a>
                        <a href="navigation.html" class="block text-blue-600 hover:underline">ğŸ”— å¯¼èˆªä¸­å¿ƒ</a>
                        <a href="index.html" class="block text-blue-600 hover:underline">ğŸ”— ç™»å½•é¡µé¢</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¿”å›æŒ‰é’® -->
        <div class="text-center">
            <button onclick="window.location.href='index.html'" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                è¿”å›ç™»å½•é¡µé¢
            </button>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–Lucideå›¾æ ‡
        lucide.createIcons();

        // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        async function checkFiles() {
            const files = [
                { name: 'GitHubåŒæ­¥è„šæœ¬', path: 'github-sync.js' },
                { name: 'GitHubåŒæ­¥ç®¡ç†é¡µé¢', path: 'github-sync-manager.html' },
                { name: 'å¯¼èˆªé¡µé¢', path: 'navigation.html' }
            ];

            for (const file of files) {
                try {
                    const response = await fetch(file.path, { method: 'HEAD' });
                    const statusElement = document.getElementById(file.name === 'GitHubåŒæ­¥è„šæœ¬' ? 'github-sync-status' : 
                                                               file.name === 'GitHubåŒæ­¥ç®¡ç†é¡µé¢' ? 'github-manager-status' : 'navigation-status');
                    
                    if (response.ok) {
                        statusElement.textContent = 'âœ… æ–‡ä»¶å­˜åœ¨';
                        statusElement.className = 'text-green-600 font-medium';
                    } else {
                        statusElement.textContent = 'âŒ æ–‡ä»¶ä¸å­˜åœ¨';
                        statusElement.className = 'text-red-600 font-medium';
                    }
                } catch (error) {
                    const statusElement = document.getElementById(file.name === 'GitHubåŒæ­¥è„šæœ¬' ? 'github-sync-status' : 
                                                               file.name === 'GitHubåŒæ­¥ç®¡ç†é¡µé¢' ? 'github-manager-status' : 'navigation-status');
                    statusElement.textContent = 'âŒ æ— æ³•è®¿é—®';
                    statusElement.className = 'text-red-600 font-medium';
                }
            }
        }

        // æµ‹è¯•GitHubåŒæ­¥åŠŸèƒ½
        async function testGitHubSync() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div class="text-blue-600">æ­£åœ¨æµ‹è¯•GitHubåŒæ­¥åŠŸèƒ½...</div>';

            try {
                // æ£€æŸ¥GitHubåŒæ­¥è„šæœ¬æ˜¯å¦åŠ è½½
                if (typeof window.githubSync === 'undefined') {
                    // å°è¯•åŠ è½½è„šæœ¬
                    const script = document.createElement('script');
                    script.src = 'github-sync.js';
                    document.head.appendChild(script);
                    
                    await new Promise((resolve, reject) => {
                        script.onload = resolve;
                        script.onerror = reject;
                        setTimeout(reject, 5000); // 5ç§’è¶…æ—¶
                    });
                }

                // æ£€æŸ¥GitHubåŒæ­¥çŠ¶æ€
                const status = window.githubSync.getStatus();
                
                let resultHTML = '<div class="space-y-2">';
                resultHTML += `<div class="p-3 bg-blue-50 rounded-lg"><strong>åˆå§‹åŒ–çŠ¶æ€:</strong> ${status.isInitialized ? 'âœ… å·²åˆå§‹åŒ–' : 'âŒ æœªåˆå§‹åŒ–'}</div>`;
                resultHTML += `<div class="p-3 bg-blue-50 rounded-lg"><strong>TokençŠ¶æ€:</strong> ${status.hasToken ? 'âœ… å·²é…ç½®' : 'âŒ æœªé…ç½®'}</div>`;
                resultHTML += `<div class="p-3 bg-blue-50 rounded-lg"><strong>Gist ID:</strong> ${status.gistId || 'æœªè®¾ç½®'}</div>`;
                resultHTML += `<div class="p-3 bg-blue-50 rounded-lg"><strong>è‡ªåŠ¨åŒæ­¥:</strong> ${status.isAutoSyncActive ? 'âœ… è¿è¡Œä¸­' : 'âŒ å·²åœæ­¢'}</div>`;
                resultHTML += `<div class="p-3 bg-blue-50 rounded-lg"><strong>æœ€ååŒæ­¥:</strong> ${status.lastSyncTime ? status.lastSyncTime.toLocaleString() : 'ä»æœªåŒæ­¥'}</div>`;
                resultHTML += '</div>';

                if (!status.isInitialized) {
                    resultHTML += '<div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">';
                    resultHTML += '<h4 class="font-medium text-yellow-800 mb-2">ä¸‹ä¸€æ­¥æ“ä½œï¼š</h4>';
                    resultHTML += '<ol class="text-sm text-yellow-700 space-y-1 list-decimal list-inside">';
                    resultHTML += '<li>ç‚¹å‡»"æ‰“å¼€GitHubåŒæ­¥ç®¡ç†"æŒ‰é’®</li>';
                    resultHTML += '<li>è·å–GitHub Personal Access Token</li>';
                    resultHTML += '<li>åœ¨ç®¡ç†é¡µé¢ä¸­é…ç½®Token</li>';
                    resultHTML += '<li>åˆå§‹åŒ–åŒæ­¥åŠŸèƒ½</li>';
                    resultHTML += '</ol>';
                    resultHTML += '</div>';
                }

                resultsDiv.innerHTML = resultHTML;

            } catch (error) {
                resultsDiv.innerHTML = `<div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h4 class="font-medium text-red-800 mb-2">æµ‹è¯•å¤±è´¥ï¼š</h4>
                    <p class="text-red-700">${error.message}</p>
                    <p class="text-red-700 mt-2">è¯·ç¡®ä¿æ‚¨é€šè¿‡WebæœåŠ¡å™¨è®¿é—®ç½‘ç«™ï¼Œè€Œä¸æ˜¯ç›´æ¥æ‰“å¼€HTMLæ–‡ä»¶ã€‚</p>
                </div>`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æ–‡ä»¶
        window.addEventListener('load', function() {
            checkFiles();
        });
    </script>
</body>
</html> 