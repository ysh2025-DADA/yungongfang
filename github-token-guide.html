<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Token é…ç½®æŒ‡å—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-6xl mx-auto p-8">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">ğŸ”‘ GitHub Token é…ç½®æŒ‡å—</h1>
            <p class="text-gray-600">è§£å†³"åˆ›å»ºGistå¤±è´¥"é—®é¢˜ï¼Œæ­£ç¡®é…ç½®GitHub Personal Access Token</p>
        </div>

        <!-- é—®é¢˜è¯Šæ–­ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸ” é—®é¢˜è¯Šæ–­</h2>
            <div class="space-y-4">
                <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h3 class="font-medium text-red-800 mb-2">å¸¸è§é”™è¯¯åŸå› ï¼š</h3>
                    <ul class="text-sm text-red-700 space-y-1 list-disc list-inside">
                        <li>Tokenæƒé™ä¸è¶³ï¼ˆç¼ºå°‘gistæƒé™ï¼‰</li>
                        <li>Tokenå·²è¿‡æœŸæˆ–è¢«æ’¤é”€</li>
                        <li>Tokenæ ¼å¼é”™è¯¯</li>
                        <li>ç½‘ç»œè¿æ¥é—®é¢˜</li>
                        <li>GitHub APIé™åˆ¶</li>
                    </ul>
                </div>
                
                <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
                    <h3 class="font-medium text-blue-800 mb-2">è§£å†³æ­¥éª¤ï¼š</h3>
                    <ol class="text-sm text-blue-700 space-y-1 list-decimal list-inside">
                        <li>é‡æ–°ç”ŸæˆGitHub Personal Access Token</li>
                        <li>ç¡®ä¿é€‰æ‹©æ­£ç¡®çš„æƒé™ï¼ˆgistæƒé™ï¼‰</li>
                        <li>å¤åˆ¶å®Œæ•´çš„Tokenï¼ˆä»¥ghp_å¼€å¤´ï¼‰</li>
                        <li>åœ¨åŒæ­¥ç®¡ç†é¡µé¢é‡æ–°é…ç½®</li>
                        <li>æµ‹è¯•Tokenæœ‰æ•ˆæ€§</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- è¯¦ç»†æ­¥éª¤ -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <!-- è·å–Tokenæ­¥éª¤ -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ“‹ è·å–GitHub Token</h3>
                
                <div class="space-y-4">
                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-blue-600">1</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">è®¿é—®GitHubè®¾ç½®</h4>
                                <p class="text-sm text-gray-600 mt-1">ç™»å½•GitHubï¼Œç‚¹å‡»å³ä¸Šè§’å¤´åƒ â†’ Settings</p>
                                <a href="https://github.com/settings" target="_blank" class="text-blue-600 hover:underline text-sm">ğŸ”— æ‰“å¼€GitHubè®¾ç½®</a>
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-blue-600">2</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">è¿›å…¥Tokenè®¾ç½®</h4>
                                <p class="text-sm text-gray-600 mt-1">å·¦ä¾§èœå• â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic)</p>
                                <a href="https://github.com/settings/tokens" target="_blank" class="text-blue-600 hover:underline text-sm">ğŸ”— æ‰“å¼€Tokenè®¾ç½®</a>
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-blue-600">3</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">ç”Ÿæˆæ–°Token</h4>
                                <p class="text-sm text-gray-600 mt-1">ç‚¹å‡»"Generate new token (classic)"</p>
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-blue-600">4</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">é…ç½®Token</h4>
                                <div class="text-sm text-gray-600 mt-1 space-y-1">
                                    <p><strong>Note:</strong> äº‘å·¥åŠåŒæ­¥Token</p>
                                    <p><strong>Expiration:</strong> å»ºè®®é€‰æ‹©"90 days"æˆ–æ›´é•¿</p>
                                    <p><strong>æƒé™é€‰æ‹©:</strong></p>
                                    <ul class="ml-4 space-y-1">
                                        <li>âœ… <code>gist</code> - åˆ›å»ºå’Œç®¡ç†Gistï¼ˆå¿…éœ€ï¼‰</li>
                                        <li>âœ… <code>repo</code> - è®¿é—®ä»“åº“ï¼ˆå¯é€‰ï¼Œç”¨äºå¤‡ä»½ï¼‰</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-blue-600">5</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">ç”Ÿæˆå¹¶å¤åˆ¶Token</h4>
                                <p class="text-sm text-gray-600 mt-1">ç‚¹å‡»"Generate token"ï¼Œç«‹å³å¤åˆ¶ç”Ÿæˆçš„Tokenï¼ˆä»¥ghp_å¼€å¤´ï¼‰</p>
                                <div class="mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                    <p class="text-sm text-yellow-800 font-medium">âš ï¸ é‡è¦æé†’ï¼š</p>
                                    <p class="text-sm text-yellow-700">Tokenåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œè¯·ç«‹å³å¤åˆ¶ä¿å­˜ï¼</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- é…ç½®Tokenæ­¥éª¤ -->
            <div class="bg-white rounded-lg shadow-sm border p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">âš™ï¸ é…ç½®Token</h3>
                
                <div class="space-y-4">
                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-green-600">1</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">è®¿é—®åŒæ­¥ç®¡ç†é¡µé¢</h4>
                                <p class="text-sm text-gray-600 mt-1">æ‰“å¼€GitHubåŒæ­¥ç®¡ç†é¡µé¢</p>
                                <button onclick="window.location.href='github-sync-manager.html'" class="mt-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                                    æ‰“å¼€GitHubåŒæ­¥ç®¡ç†
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-green-600">2</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">è¾“å…¥Token</h4>
                                <p class="text-sm text-gray-600 mt-1">åœ¨"GitHub Personal Access Token"å­—æ®µä¸­ç²˜è´´æ‚¨çš„Token</p>
                                <div class="mt-2 p-3 bg-gray-50 border border-gray-200 rounded-lg">
                                    <p class="text-sm text-gray-700">Tokenæ ¼å¼ç¤ºä¾‹ï¼š<code class="bg-gray-100 px-2 py-1 rounded">ghp_xxxxxxxxxxxxxxxxxxxx</code></p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-green-600">3</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">åˆå§‹åŒ–åŒæ­¥</h4>
                                <p class="text-sm text-gray-600 mt-1">ç‚¹å‡»"åˆå§‹åŒ–åŒæ­¥"æŒ‰é’®</p>
                                <div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                    <p class="text-sm text-blue-700">ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºGistå¹¶ä¿å­˜é…ç½®</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="step-item">
                        <div class="flex items-start">
                            <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3 mt-1">
                                <span class="text-sm font-bold text-green-600">4</span>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-900">ä¿å­˜Gist ID</h4>
                                <p class="text-sm text-gray-600 mt-1">åˆå§‹åŒ–æˆåŠŸåï¼Œè¯·ä¿å­˜æ˜¾ç¤ºçš„Gist ID</p>
                                <div class="mt-2 p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <p class="text-sm text-green-700">Gist IDç”¨äºåœ¨å…¶ä»–è®¾å¤‡ä¸Šè¿æ¥åŒä¸€ä¸ªæ•°æ®æº</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ•…éšœæ’é™¤ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ› ï¸ æ•…éšœæ’é™¤</h3>
            
            <div class="space-y-4">
                <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h4 class="font-medium text-red-800 mb-2">é”™è¯¯ï¼š401 Unauthorized</h4>
                    <p class="text-sm text-red-700 mb-2">åŸå› ï¼šTokenæ— æ•ˆæˆ–å·²è¿‡æœŸ</p>
                    <p class="text-sm text-red-700">è§£å†³ï¼šé‡æ–°ç”ŸæˆTokenï¼Œç¡®ä¿é€‰æ‹©gistæƒé™</p>
                </div>

                <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h4 class="font-medium text-red-800 mb-2">é”™è¯¯ï¼š403 Forbidden</h4>
                    <p class="text-sm text-red-700 mb-2">åŸå› ï¼šTokenæƒé™ä¸è¶³</p>
                    <p class="text-sm text-red-700">è§£å†³ï¼šç¡®ä¿TokenåŒ…å«gistæƒé™</p>
                </div>

                <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h4 class="font-medium text-red-800 mb-2">é”™è¯¯ï¼š422 Unprocessable Entity</h4>
                    <p class="text-sm text-red-700 mb-2">åŸå› ï¼šGiståˆ›å»ºå‚æ•°é”™è¯¯</p>
                    <p class="text-sm text-red-700">è§£å†³ï¼šæ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼Œé‡æ–°å°è¯•</p>
                </div>

                <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                    <h4 class="font-medium text-red-800 mb-2">é”™è¯¯ï¼šNetwork Error</h4>
                    <p class="text-sm text-red-700 mb-2">åŸå› ï¼šç½‘ç»œè¿æ¥é—®é¢˜</p>
                    <p class="text-sm text-red-700">è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¨åé‡è¯•</p>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•å·¥å…· -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ§ª Tokenæµ‹è¯•å·¥å…·</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">è¾“å…¥Tokenè¿›è¡Œæµ‹è¯•</label>
                    <input type="password" id="test-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <button onclick="testToken()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                    æµ‹è¯•Tokenæœ‰æ•ˆæ€§
                </button>
                
                <div id="test-result" class="mt-4"></div>
            </div>
        </div>

        <!-- å¿«é€Ÿé“¾æ¥ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">ğŸ”— å¿«é€Ÿé“¾æ¥</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <a href="https://github.com/settings/tokens" target="_blank" class="flex items-center p-4 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-colors">
                    <i data-lucide="github" class="h-6 w-6 text-blue-600 mr-3"></i>
                    <div>
                        <div class="font-medium text-blue-900">GitHub Tokenè®¾ç½®</div>
                        <div class="text-sm text-blue-700">ç”Ÿæˆæ–°çš„Token</div>
                    </div>
                </a>
                
                <button onclick="window.location.href='github-sync-manager.html'" class="flex items-center p-4 bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors">
                    <i data-lucide="settings" class="h-6 w-6 text-green-600 mr-3"></i>
                    <div>
                        <div class="font-medium text-green-900">åŒæ­¥ç®¡ç†é¡µé¢</div>
                        <div class="text-sm text-green-700">é…ç½®Tokenå’ŒåŒæ­¥</div>
                    </div>
                </button>
                
                <button onclick="window.location.href='test-github-sync.html'" class="flex items-center p-4 bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 transition-colors">
                    <i data-lucide="test-tube" class="h-6 w-6 text-purple-600 mr-3"></i>
                    <div>
                        <div class="font-medium text-purple-900">åŒæ­¥æµ‹è¯•é¡µé¢</div>
                        <div class="text-sm text-purple-700">æµ‹è¯•åŒæ­¥åŠŸèƒ½</div>
                    </div>
                </button>
            </div>
        </div>

        <!-- è¿”å›æŒ‰é’® -->
        <div class="text-center">
            <button onclick="window.location.href='index.html'" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                è¿”å›ç™»å½•é¡µé¢
            </button>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–Lucideå›¾æ ‡
        lucide.createIcons();

        // æ£€æŸ¥ç®¡ç†å‘˜æƒé™
        function checkAdminPermission() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (!currentUser) {
                showPermissionError('è¯·å…ˆç™»å½•ç®¡ç†å‘˜è´¦å·');
                return false;
            }
            
            try {
                const user = JSON.parse(currentUser);
                if (user.role !== 'admin') {
                    showPermissionError('åªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®æ­¤é¡µé¢');
                    return false;
                }
                return true;
            } catch (error) {
                showPermissionError('ç”¨æˆ·ä¿¡æ¯è§£æå¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•');
                return false;
            }
        }

        // æ˜¾ç¤ºæƒé™é”™è¯¯
        function showPermissionError(message) {
            const container = document.querySelector('.max-w-6xl');
            container.innerHTML = `
                <div class="text-center py-16">
                    <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i data-lucide="shield-x" class="h-8 w-8 text-red-600"></i>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900 mb-4">è®¿é—®è¢«æ‹’ç»</h1>
                    <p class="text-gray-600 mb-8">${message}</p>
                    <div class="space-x-4">
                        <button onclick="window.location.href='index.html'" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                            è¿”å›ç™»å½•é¡µé¢
                        </button>
                        <button onclick="window.location.href='admin-dashboard.html'" class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                            ç®¡ç†å‘˜æ§åˆ¶å°
                        </button>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }

        // æµ‹è¯•Tokenæœ‰æ•ˆæ€§
        async function testToken() {
            if (!checkAdminPermission()) return;
            
            const token = document.getElementById('test-token').value.trim();
            const resultDiv = document.getElementById('test-result');
            
            if (!token) {
                resultDiv.innerHTML = '<div class="p-4 bg-red-50 border border-red-200 rounded-lg"><p class="text-red-700">è¯·è¾“å…¥Token</p></div>';
                return;
            }
            
            resultDiv.innerHTML = '<div class="p-4 bg-blue-50 border border-blue-200 rounded-lg"><p class="text-blue-700">æ­£åœ¨æµ‹è¯•Token...</p></div>';
            
            try {
                // æµ‹è¯•Tokenæ˜¯å¦æœ‰æ•ˆ
                const response = await fetch('https://api.github.com/user', {
                    headers: {
                        'Authorization': `token ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (response.ok) {
                    const userData = await response.json();
                    
                    // æµ‹è¯•Gistæƒé™
                    const gistResponse = await fetch('https://api.github.com/gists', {
                        headers: {
                            'Authorization': `token ${token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    });
                    
                    let resultHTML = '<div class="p-4 bg-green-50 border border-green-200 rounded-lg">';
                    resultHTML += '<h4 class="font-medium text-green-800 mb-2">âœ… Tokenæµ‹è¯•æˆåŠŸ</h4>';
                    resultHTML += `<p class="text-green-700">ç”¨æˆ·å: ${userData.login}</p>`;
                    resultHTML += `<p class="text-green-700">é‚®ç®±: ${userData.email || 'æœªå…¬å¼€'}</p>`;
                    
                    if (gistResponse.ok) {
                        resultHTML += '<p class="text-green-700">Gistæƒé™: âœ… æ­£å¸¸</p>';
                    } else {
                        resultHTML += '<p class="text-red-700">Gistæƒé™: âŒ ä¸è¶³</p>';
                        resultHTML += '<p class="text-red-700">è¯·ç¡®ä¿TokenåŒ…å«gistæƒé™</p>';
                    }
                    
                    resultHTML += '</div>';
                    resultDiv.innerHTML = resultHTML;
                    
                } else {
                    resultDiv.innerHTML = '<div class="p-4 bg-red-50 border border-red-200 rounded-lg"><p class="text-red-700">âŒ Tokenæ— æ•ˆæˆ–å·²è¿‡æœŸ</p></div>';
                }
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="p-4 bg-red-50 border border-red-200 rounded-lg"><p class="text-red-700">âŒ æµ‹è¯•å¤±è´¥: ${error.message}</p></div>`;
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥æƒé™
        window.addEventListener('load', function() {
            if (!checkAdminPermission()) {
                return;
            }
        });
    </script>
</body>
</html> 