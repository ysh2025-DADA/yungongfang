<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº‘å·¥åŠ - ç™»å½•æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-4xl mx-auto p-8">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">äº‘å·¥åŠ - ç™»å½•åŠŸèƒ½æµ‹è¯•</h1>
            <p class="text-gray-600">æµ‹è¯•å„ç§ç™»å½•åœºæ™¯ï¼Œç¡®ä¿ç³»ç»Ÿæ­£å¸¸å·¥ä½œ</p>
        </div>

        <!-- æµ‹è¯•è´¦å·ä¿¡æ¯ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸ“‹ å¯ç”¨æµ‹è¯•è´¦å·</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                    <h3 class="font-medium text-blue-900 mb-2">ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜</h3>
                    <div class="text-sm text-blue-700 space-y-1">
                        <div><strong>ç”¨æˆ·åï¼š</strong>18072830839</div>
                        <div><strong>å¯†ç ï¼š</strong>ysh938798</div>
                        <div><strong>æƒé™ï¼š</strong>ç³»ç»Ÿç®¡ç†</div>
                    </div>
                </div>
                <div class="p-4 bg-green-50 rounded-lg border border-green-200">
                    <h3 class="font-medium text-green-900 mb-2">ğŸ‘¨â€ğŸ“ å­¦ç”Ÿè´¦å·</h3>
                    <div class="text-sm text-green-700 space-y-1">
                        <div><strong>è´¦å·1ï¼š</strong>student1 / 123456 (å¼ ä¸‰)</div>
                        <div><strong>è´¦å·2ï¼š</strong>student2 / 123456 (æå››)</div>
                        <div><strong>æƒé™ï¼š</strong>å­¦ä¹ ç®¡ç†</div>
                    </div>
                </div>
                <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                    <h3 class="font-medium text-purple-900 mb-2">ğŸ‘¨â€ğŸ« æ•™å¸ˆè´¦å·</h3>
                    <div class="text-sm text-purple-700 space-y-1">
                        <div><strong>è´¦å·1ï¼š</strong>teacher1 / 123456 (ç‹è€å¸ˆ)</div>
                        <div><strong>è´¦å·2ï¼š</strong>teacher2 / 123456 (æè€å¸ˆ)</div>
                        <div><strong>æƒé™ï¼š</strong>æ•™å­¦ç®¡ç†</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¿«é€Ÿç™»å½•æµ‹è¯• -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">âš¡ å¿«é€Ÿç™»å½•æµ‹è¯•</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <button onclick="testLogin('admin', '18072830839', 'ysh938798')" class="p-4 bg-purple-100 hover:bg-purple-200 rounded-lg border border-purple-300 transition-colors">
                    <div class="text-center">
                        <i data-lucide="shield" class="h-8 w-8 text-purple-600 mx-auto mb-2"></i>
                        <div class="font-medium text-purple-900">ç®¡ç†å‘˜ç™»å½•</div>
                        <div class="text-sm text-purple-700">18072830839</div>
                    </div>
                </button>
                <button onclick="testLogin('student', 'student1', '123456')" class="p-4 bg-blue-100 hover:bg-blue-200 rounded-lg border border-blue-300 transition-colors">
                    <div class="text-center">
                        <i data-lucide="graduation-cap" class="h-8 w-8 text-blue-600 mx-auto mb-2"></i>
                        <div class="font-medium text-blue-900">å­¦ç”Ÿç™»å½•</div>
                        <div class="text-sm text-blue-700">student1 (å¼ ä¸‰)</div>
                    </div>
                </button>
                <button onclick="testLogin('teacher', 'teacher1', '123456')" class="p-4 bg-green-100 hover:bg-green-200 rounded-lg border border-green-300 transition-colors">
                    <div class="text-center">
                        <i data-lucide="book-open" class="h-8 w-8 text-green-600 mx-auto mb-2"></i>
                        <div class="font-medium text-green-900">æ•™å¸ˆç™»å½•</div>
                        <div class="text-sm text-green-700">teacher1 (ç‹è€å¸ˆ)</div>
                    </div>
                </button>
            </div>
        </div>

        <!-- ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ -->
        <div class="bg-white rounded-lg shadow-sm border p-6 mb-8">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸ” ç³»ç»ŸçŠ¶æ€æ£€æŸ¥</h2>
            <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div>
                        <div class="font-medium text-gray-900">localStorage çŠ¶æ€</div>
                        <div class="text-sm text-gray-600">æ£€æŸ¥ç”¨æˆ·æ•°æ®å­˜å‚¨</div>
                    </div>
                    <button onclick="checkLocalStorage()" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700">
                        æ£€æŸ¥
                    </button>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div>
                        <div class="font-medium text-gray-900">sessionStorage çŠ¶æ€</div>
                        <div class="text-sm text-gray-600">æ£€æŸ¥å½“å‰ç™»å½•çŠ¶æ€</div>
                    </div>
                    <button onclick="checkSessionStorage()" class="px-4 py-2 bg-green-600 text-white rounded-lg text-sm hover:bg-green-700">
                        æ£€æŸ¥
                    </button>
                </div>
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                    <div>
                        <div class="font-medium text-gray-900">æ¸…é™¤æ‰€æœ‰æ•°æ®</div>
                        <div class="text-sm text-gray-600">é‡ç½®ç³»ç»Ÿåˆ°åˆå§‹çŠ¶æ€</div>
                    </div>
                    <button onclick="clearAllData()" class="px-4 py-2 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700">
                        æ¸…é™¤
                    </button>
                </div>
            </div>
        </div>

        <!-- æµ‹è¯•ç»“æœ -->
        <div class="bg-white rounded-lg shadow-sm border p-6">
            <h2 class="text-xl font-semibold text-gray-900 mb-4">ğŸ“Š æµ‹è¯•ç»“æœ</h2>
            <div id="test-results" class="space-y-2">
                <div class="text-gray-500">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
            </div>
        </div>

        <!-- è¿”å›æŒ‰é’® -->
        <div class="text-center mt-8">
            <a href="index.html" class="inline-flex items-center px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
                <i data-lucide="arrow-left" class="h-5 w-5 mr-2"></i>
                è¿”å›ç™»å½•é¡µé¢
            </a>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–Lucideå›¾æ ‡
        lucide.createIcons();

        // æ·»åŠ æµ‹è¯•ç»“æœ
        function addTestResult(message, type = 'info') {
            const resultsDiv = document.getElementById('test-results');
            const colors = {
                success: 'text-green-700 bg-green-50 border-green-200',
                error: 'text-red-700 bg-red-50 border-red-200',
                info: 'text-blue-700 bg-blue-50 border-blue-200',
                warning: 'text-yellow-700 bg-yellow-50 border-yellow-200'
            };
            
            const resultDiv = document.createElement('div');
            resultDiv.className = `p-3 rounded-lg border ${colors[type]}`;
            resultDiv.innerHTML = `
                <div class="flex items-center">
                    <span class="mr-2">${new Date().toLocaleTimeString()}</span>
                    <span>${message}</span>
                </div>
            `;
            
            resultsDiv.insertBefore(resultDiv, resultsDiv.firstChild);
            
            // é™åˆ¶æ˜¾ç¤ºç»“æœæ•°é‡
            if (resultsDiv.children.length > 10) {
                resultsDiv.removeChild(resultsDiv.lastChild);
            }
        }

        // æµ‹è¯•ç™»å½•åŠŸèƒ½
        function testLogin(role, username, password) {
            addTestResult(`å¼€å§‹æµ‹è¯• ${role} ç™»å½•: ${username}`, 'info');
            
            // æ¨¡æ‹Ÿç™»å½•éªŒè¯
            setTimeout(() => {
                if (role === 'admin') {
                    if (username === '18072830839' && password === 'ysh938798') {
                        addTestResult(`âœ… ç®¡ç†å‘˜ç™»å½•æˆåŠŸ: ${username}`, 'success');
                        // ä¿å­˜ç™»å½•çŠ¶æ€
                        const adminUser = {
                            id: 1,
                            username: username,
                            realName: 'ç³»ç»Ÿç®¡ç†å‘˜',
                            email: 'admin@system.com',
                            role: 'admin',
                            status: 'active'
                        };
                        sessionStorage.setItem('currentUser', JSON.stringify(adminUser));
                    } else {
                        addTestResult(`âŒ ç®¡ç†å‘˜ç™»å½•å¤±è´¥: ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯`, 'error');
                    }
                } else {
                    // éªŒè¯å­¦ç”Ÿå’Œæ•™å¸ˆè´¦å·
                    const users = loadUsers();
                    const user = users.find(u => 
                        u.username === username && 
                        u.password === password && 
                        u.role === role && 
                        u.status === 'active'
                    );
                    
                    if (user) {
                        addTestResult(`âœ… ${role === 'student' ? 'å­¦ç”Ÿ' : 'æ•™å¸ˆ'}ç™»å½•æˆåŠŸ: ${user.realName}`, 'success');
                        sessionStorage.setItem('currentUser', JSON.stringify(user));
                    } else {
                        addTestResult(`âŒ ${role === 'student' ? 'å­¦ç”Ÿ' : 'æ•™å¸ˆ'}ç™»å½•å¤±è´¥: è´¦å·ä¸å­˜åœ¨æˆ–å·²ç¦ç”¨`, 'error');
                    }
                }
            }, 500);
        }

        // ä»localStorageåŠ è½½ç”¨æˆ·æ•°æ®
        function loadUsers() {
            const savedUsers = localStorage.getItem('admin_users');
            if (savedUsers) {
                return JSON.parse(savedUsers);
            }
            // è¿”å›é»˜è®¤ç”¨æˆ·æ•°æ®
            return [
                {
                    id: 1,
                    username: 'student1',
                    password: '123456',
                    realName: 'å¼ ä¸‰',
                    email: 'student1@demo.com',
                    phone: '13800138001',
                    role: 'student',
                    status: 'active',
                    grade: 'grade3'
                },
                {
                    id: 2,
                    username: 'student2',
                    password: '123456',
                    realName: 'æå››',
                    email: 'student2@demo.com',
                    phone: '13800138002',
                    role: 'student',
                    status: 'active',
                    grade: 'grade4'
                },
                {
                    id: 3,
                    username: 'teacher1',
                    password: '123456',
                    realName: 'ç‹è€å¸ˆ',
                    email: 'teacher1@demo.com',
                    phone: '13800138003',
                    role: 'teacher',
                    status: 'active'
                },
                {
                    id: 4,
                    username: 'teacher2',
                    password: '123456',
                    realName: 'æè€å¸ˆ',
                    email: 'teacher2@demo.com',
                    phone: '13800138004',
                    role: 'teacher',
                    status: 'active'
                }
            ];
        }

        // æ£€æŸ¥localStorageçŠ¶æ€
        function checkLocalStorage() {
            const users = localStorage.getItem('admin_users');
            if (users) {
                const userCount = JSON.parse(users).length;
                addTestResult(`ğŸ“Š localStorageä¸­æœ‰ ${userCount} ä¸ªç”¨æˆ·æ•°æ®`, 'success');
            } else {
                addTestResult(`âš ï¸ localStorageä¸­æ²¡æœ‰ç”¨æˆ·æ•°æ®ï¼Œå°†ä½¿ç”¨é»˜è®¤æ•°æ®`, 'warning');
            }
        }

        // æ£€æŸ¥sessionStorageçŠ¶æ€
        function checkSessionStorage() {
            const currentUser = sessionStorage.getItem('currentUser');
            if (currentUser) {
                const user = JSON.parse(currentUser);
                addTestResult(`ğŸ‘¤ å½“å‰ç™»å½•ç”¨æˆ·: ${user.realName} (${user.role})`, 'success');
            } else {
                addTestResult(`â„¹ï¸ å½“å‰æ²¡æœ‰ç™»å½•ç”¨æˆ·`, 'info');
            }
        }

        // æ¸…é™¤æ‰€æœ‰æ•°æ®
        function clearAllData() {
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æ•°æ®å—ï¼Ÿè¿™å°†é‡ç½®ç³»ç»Ÿåˆ°åˆå§‹çŠ¶æ€ã€‚')) {
                localStorage.clear();
                sessionStorage.clear();
                addTestResult(`ğŸ—‘ï¸ å·²æ¸…é™¤æ‰€æœ‰æœ¬åœ°æ•°æ®`, 'warning');
                
                // é‡æ–°åˆå§‹åŒ–é»˜è®¤ç”¨æˆ·æ•°æ®
                setTimeout(() => {
                    const defaultUsers = loadUsers();
                    localStorage.setItem('admin_users', JSON.stringify(defaultUsers));
                    addTestResult(`ğŸ”„ å·²é‡æ–°åˆå§‹åŒ–é»˜è®¤ç”¨æˆ·æ•°æ®`, 'success');
                }, 1000);
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
        window.addEventListener('load', function() {
            addTestResult('ğŸš€ ç™»å½•æµ‹è¯•é¡µé¢å·²åŠ è½½', 'info');
            checkLocalStorage();
            checkSessionStorage();
        });
    </script>
</body>
</html> 